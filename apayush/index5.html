<!DOCTYPE html>
<!-- Add dark class for dark mode -->
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Title will be set by JS -->
    <title data-key="page_title">PriceFinder - Find Best Prices</title>
    <!-- Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Use Inter font -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script>
        // Set theme on initial load
        if (localStorage.theme === 'dark' || (!('theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
            document.documentElement.classList.add('dark')
        } else {
            document.documentElement.classList.remove('dark')
        }
    </script>
    <style>
        /* Use Inter font family */
        body {
            font-family: 'Inter', sans-serif;
        }
        /* Custom scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }
        ::-webkit-scrollbar-thumb {
            background: #9ca3af; /* gray-400 */
            border-radius: 9999px;
        }
        html.dark ::-webkit-scrollbar-thumb {
            background: #4b5563; /* gray-600 */
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #6b7280; /* gray-500 */
        }
        
        /* Modal Backdrop */
        .modal-backdrop {
            display: none;
            position: fixed;
            inset: 0;
            background-color: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(2px);
            z-index: 40;
            transition: opacity 0.3s ease-in-out;
            opacity: 0;
        }
        /* Modal Panel */
        .modal {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0.95);
            z-index: 50;
            transition: all 0.3s ease-in-out;
            opacity: 0;
        }
        /* Modal visible states */
        .modal.show, .modal-backdrop.show {
            display: block;
            opacity: 1;
        }
        .modal.show {
             transform: translate(-50%, -50%) scale(1);
        }

        /* Custom Range Slider */
        input[type="range"] {
            -webkit-appearance: none;
            appearance: none;
            width: 100%;
            height: 8px;
            border-radius: 5px;
            background: #e5e7eb; /* gray-200 */
            outline: none;
            opacity: 0.7;
            transition: opacity 0.2s;
        }
        html.dark input[type="range"] {
            background: #374151; /* gray-700 */
        }
        input[type="range"]:hover {
            opacity: 1;
        }
        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #4f46e5; /* indigo-600 */
            cursor: pointer;
        }
        input[type="range"]::-moz-range-thumb {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #4f46e5; /* indigo-600 */
            cursor: pointer;
        }
        
        /* Wishlist Heart Icon */
        .wishlist-btn {
            transition: all 0.2s ease;
        }
        .wishlist-btn .heart-icon {
            fill: none;
            stroke: #4f46e5; /* indigo-600 */
            stroke-width: 2;
            transition: all 0.2s ease;
        }
        .wishlist-btn.active .heart-icon {
            fill: #ef4444; /* red-500 */
            stroke: #ef4444; /* red-500 */
        }
        .wishlist-btn:hover {
            transform: scale(1.1);
        }

        /* Hide theme icons by default */
        #theme-toggle .sun-icon,
        #theme-toggle .moon-icon {
            display: none;
        }
        /* Show moon in light mode */
        html:not(.dark) #theme-toggle .moon-icon {
            display: block;
        }
        /* Show sun in dark mode */
        html.dark #theme-toggle .sun-icon {
            display: block;
        }
    </style>
</head>
<body class="bg-gray-100 dark:bg-gray-900 text-gray-900 dark:text-gray-100 transition-colors duration-300">

    <!-- Header Section -->
    <header class="bg-white dark:bg-gray-800 shadow-md dark:shadow-gray-700 sticky top-0 z-20">
        <nav class="container mx-auto px-4 sm:px-6 lg:px-8 py-4 flex justify-between items-center">
            <div class="text-2xl font-bold text-indigo-600 dark:text-indigo-400">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 inline-block -mt-1" viewBox="0 0 20 20" fill="currentColor">
                    <path fill-rule="evenodd" d="M10 2a4 4 0 00-4 4v1H5a1 1 0 00-.993.883L4 8v9a1 1 0 001 1h10a1 1 0 001-1V8l-.007-.117A1 1 0 0015 7h-1V6a4 4 0 00-4-4zm2 5V6a2 2 0 10-4 0v1h4zm-6 3a1 1 0 011 1v5a1 1 0 11-2 0v-5a1 1 0 011-1zm4 0a1 1 0 011 1v5a1 1 0 11-2 0v-5a1 1 0 011-1z" clip-rule="evenodd" />
                </svg>
                PriceFinder
            </div>
            <div class="flex items-center space-x-4">
                <!-- Language Dropdown -->
                <div class="relative">
                    <button id="lang-menu-btn" class="p-2 text-gray-600 dark:text-gray-300 hover:text-indigo-600 dark:hover:text-indigo-400 transition-colors">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6-4a1 1 0 001 1h3a1 1 0 001-1v-3a1 1 0 00-1-1h-3a1 1 0 00-1 1v3z" />
                          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9c1.657 0 3-4.03 3-9s-1.343-9-3-9-3 4.03-3 9 1.343 9 3 9z" />
                        </svg>
                    </button>
                    <!-- Dropdown Menu -->
                    <div id="lang-menu" class="hidden absolute right-0 mt-2 w-36 bg-white dark:bg-gray-700 rounded-md shadow-lg py-1 z-30">
                        <button class="lang-btn block w-full text-left px-4 py-2 text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-600" data-lang="en">English</button>
                        <button class="lang-btn block w-full text-left px-4 py-2 text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-600" data-lang="hi">हिन्दी</button>
                        <button class="lang-btn block w-full text-left px-4 py-2 text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-600" data-lang="or">ଓଡ଼ିଆ</button>
                    </div>
                </div>

                <!-- Theme Toggle -->
                <button id="theme-toggle" class="p-2 text-gray-600 dark:text-gray-300 hover:text-indigo-600 dark:hover:text-indigo-400 transition-colors">
                    <svg class="h-6 w-6 sun-icon" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z" />
                    </svg>
                    <svg class="h-6 w-6 moon-icon" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z" />
                    </svg>
                </button>

                <!-- Cart Button -->
                <button id="cart-btn" class="flex items-center text-gray-600 dark:text-gray-300 hover:text-indigo-600 dark:hover:text-indigo-400 transition-colors duration-300 group">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z" />
                    </svg>
                    <span class="ml-1" data-key="cart">Cart</span>
                    <span id="cart-count" class="ml-2 bg-indigo-600 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center group-hover:bg-indigo-700 transition-colors">0</span>
                </button>
                <!-- Login Button -->
                <button id="login-btn" class="text-gray-600 dark:text-gray-300 hover:text-indigo-600 dark:hover:text-indigo-400 px-4 py-2 rounded-md transition-all duration-300" data-key="login">
                    Login
                </button>
                <!-- Signup Button -->
                <button id="signup-btn" class="bg-indigo-600 text-white px-5 py-2 rounded-md hover:bg-indigo-700 dark:bg-indigo-500 dark:hover:bg-indigo-600 transition-all duration-300 shadow-sm hover:shadow-md" data-key="signup">
                    Sign Up
                </button>
            </div>
        </nav>
    </header>

    <!-- Main Content -->
    <main class="container mx-auto px-4 sm:px-6 lg:px-8 py-8">

        <!-- Search & Filter Section -->
        <section class="bg-white dark:bg-gray-800 p-6 rounded-lg shadow-md dark:shadow-gray-700 mb-8">
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
                <!-- Search Bar -->
                <div class="lg:col-span-2">
                    <label for="search" class="block text-sm font-medium text-gray-700 dark:text-gray-300" data-key="find_item_label">Find an item</label>
                    <div class="mt-1 relative rounded-md shadow-sm">
                        <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                            <svg class="h-5 w-5 text-gray-400" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
                                <path fill-rule="evenodd" d="M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z" clip-rule="evenodd" />
                            </svg>
                        </div>
                        <input type="text" id="search" class="focus:ring-indigo-500 focus:border-indigo-500 block w-full pl-10 sm:text-sm border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 rounded-md p-2" placeholder="e.g., Wireless Headphones" data-placeholder-key="search_placeholder">
                    </div>
                </div>

                <!-- Category Dropdown -->
                <div>
                    <label for="category" class="block text-sm font-medium text-gray-700 dark:text-gray-300" data-key="category_label">Category</label>
                    <select id="category" class="mt-1 block w-full p-2 text-base border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md">
                        <option value="All" data-key="cat_all">All</option>
                        <option value="Electronics" data-key="cat_electronics">Electronics</option>
                        <option value="Books" data-key="cat_books">Books</option>
                        <option value="Apparel" data-key="cat_apparel">Apparel</option>
                        <option value="Home" data-key="cat_home">Home</option>
                    </select>
                </div>

                <!-- Sort By Dropdown -->
                <div>
                    <label for="sort_by" class="block text-sm font-medium text-gray-700 dark:text-gray-300" data-key="sort_by_label">Sort By</label>
                    <select id="sort_by" class="mt-1 block w-full p-2 text-base border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md">
                        <option value="Best Match" data-key="sort_best_match">Best Match</option>
                        <option value="Price: Low to High" data-key="sort_low_high">Price: Low to High</option>
                        <option value="Price: High to Low" data-key="sort_high_low">Price: High to Low</option>
                    </select>
                </div>

                <!-- Price Range Slider -->
                <div class="md:col-span-3">
                    <label for="price_range" class="block text-sm font-medium text-gray-700 dark:text-gray-300" data-key="price_range_label">Price Range</label>
                    <div class="flex items-center justify-between">
                        <input type="range" id="price_range" min="0" max="1000" value="1000" class="w-full mt-2">
                        <span id="price_value" class="ml-4 text-sm font-medium text-gray-900 dark:text-gray-100 w-20 text-right">$1000</span>
                    </div>
                    <div class="flex justify-between text-xs text-gray-600 dark:text-gray-400 mt-1">
                        <span>$0</span>
                        <span>$500</span>
                        <span>$1000</span>
                    </div>
                </div>
                
                <!-- Clear Filters Button -->
                <div class="md:col-span-1 flex items-end">
                    <button id="clear-filters" class="w-full bg-gray-200 dark:bg-gray-600 text-gray-700 dark:text-gray-200 px-4 py-2 rounded-md hover:bg-gray-300 dark:hover:bg-gray-500 transition duration-300" data-key="clear_filters">
                        Clear Filters
                    </button>
                </div>

            </div>
        </section>

        <!-- Product Grid Section -->
        <section id="product-grid">
            <h2 class="text-2xl font-semibold text-gray-800 dark:text-gray-200 mb-4" data-key="results">Results</h2>
            <div id="product-list" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6">
                <!-- Product cards will be dynamically inserted here -->
            </div>
            <div id="no-results" class="hidden text-center text-gray-500 dark:text-gray-400 mt-8 py-12">
                <svg xmlns="http://www.w3.org/2000/svg" class="mx-auto h-12 w-12 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                </svg>
                <h3 class="mt-2 text-lg font-medium" data-key="no_results_title">No results found</h3>
                <p class="mt-1 text-sm" data-key="no_results_desc">Try adjusting your search or filters.</p>
            </div>
        </section>

    </main>

    <!-- Footer Section -->
    <footer class="bg-white dark:bg-gray-800 mt-12 border-t border-gray-200 dark:border-gray-700">
        <div class="container mx-auto px-4 sm:px-6 lg:px-8 py-12">
            <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
                <!-- Column 1: Brand -->
                <div>
                    <h2 class="text-xl font-bold text-indigo-600 dark:text-indigo-400">PriceFinder</h2>
                    <p class="mt-2 text-gray-500 dark:text-gray-400 text-sm" data-key="footer_desc">Find the best deals on your favorite products from thousands of stores.</p>
                </div>
                <!-- Column 2: Quick Links -->
                <div>
                    <h3 class="text-sm font-semibold text-gray-900 dark:text-white uppercase tracking-wider" data-key="footer_links">Quick Links</h3>
                    <ul class="mt-4 space-y-2">
                        <li><a href="#" class="text-sm text-gray-500 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white" data-key="footer_about">About Us</a></li>
                        <li><a href="#" class="text-sm text-gray-500 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white" data-key="footer_contact">Contact</a></li>
                        <li><a href="#" class="text-sm text-gray-500 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white" data-key="footer_faq">FAQ</a></li>
                    </ul>
                </div>
                <!-- Column 3: Legal -->
                <div>
                    <h3 class="text-sm font-semibold text-gray-900 dark:text-white uppercase tracking-wider" data-key="footer_legal">Legal</h3>
                    <ul class="mt-4 space-y-2">
                        <li><a href="#" class="text-sm text-gray-500 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white" data-key="footer_privacy">Privacy Policy</a></li>
                        <li><a href="#" class="text-sm text-gray-500 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white" data-key="footer_terms">Terms of Service</a></li>
                    </ul>
                </div>
                <!-- Column 4: Social -->
                <div>
                    <h3 class="text-sm font-semibold text-gray-900 dark:text-white uppercase tracking-wider" data-key="footer_social">Follow Us</h3>
                    <div class="flex mt-4 space-x-4">
                        <a href="#" class="text-gray-500 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white">
                            <span class="sr-only">Facebook</span>
                            <svg class="h-6 w-6" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true"><path fill-rule="evenodd" d="M22 12c0-5.523-4.477-10-10-10S2 6.477 2 12c0 4.991 3.657 9.128 8.438 9.878v-6.987h-2.54V12h2.54V9.797c0-2.506 1.492-3.89 3.777-3.89 1.094 0 2.238.195 2.238.195v2.46h-1.26c-1.243 0-1.63.771-1.63 1.562V12h2.773l-.443 2.89h-2.33v6.988C18.343 21.128 22 16.991 22 12z" clip-rule="evenodd" /></svg>
                        </a>
                        <a href="#" class="text-gray-500 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white">
                            <span class="sr-only">Twitter</span>
                            <svg class="h-6 w-6" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true"><path d="M8.29 20.251c7.547 0 11.675-6.253 11.675-11.675 0-.178 0-.355-.012-.53A8.348 8.348 0 0022 5.92a8.19 8.19 0 01-2.357.646 4.118 4.118 0 001.804-2.27 8.224 8.224 0 01-2.605.996 4.107 4.107 0 00-6.993 3.743 11.63 11.63 0 01-8.457-4.287 4.106 4.106 0 001.27 5.477A4.072 4.072 0 012.8 9.713v.052a4.105 4.105 0 003.292 4.022 4.095 4.095 0 01-1.853.07 4.108 4.108 0 003.834 2.85A8.233 8.233 0 012 18.407a11.616 11.616 0 006.29 1.84" /></svg>
                        </a>
                    </div>
                </div>
            </div>
            <div class="mt-8 border-t border-gray-200 dark:border-gray-700 pt-8 text-center">
                <p class="text-sm text-gray-500 dark:text-gray-400" data-key="footer_copyright">&copy; 2025 PriceFinder. All rights reserved.</p>
            </div>
        </div>
    </footer>


    <!-- Modal Backdrop -->
    <div id="modal-backdrop" class="modal-backdrop"></div>

    <!-- View Details Modal Panel -->
    <div id="item-modal" class="modal bg-white dark:bg-gray-800 w-11/12 md:max-w-3xl mx-auto rounded-lg shadow-lg overflow-hidden">
        <div class="flex justify-between items-center p-4 border-b dark:border-gray-700">
            <h2 id="modal-title" class="text-xl font-semibold" data-key="product_details">Product Details</h2>
            <button class="modal-close-btn text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 transition-colors">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                </svg>
            </button>
        </div>
        <div class="p-6 max-h-[70vh] overflow-y-auto">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <!-- Modal Image -->
                <div>
                    <img id="modal-img" src="https://placehold.co/600x400" alt="Product Image" class="w-full rounded-md shadow-sm">
                </div>
                <!-- Modal Info -->
                <div>
                    <h3 id="modal-name" class="text-2xl font-bold">Item Name</h3>
                    <p id="modal-desc" class="text-gray-600 dark:text-gray-300 mt-2">Item description goes here...</p>
                    
                    <!-- Shop List -->
                    <div class="mt-4">
                        <h4 class="text-md font-semibold mb-2" data-key="available_from">Available from:</h4>
                        <div id="modal-shop-list" class="space-y-2 max-h-32 overflow-y-auto pr-2">
                            <!-- Shop list will be dynamically inserted here -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="p-4 bg-gray-50 dark:bg-gray-700 border-t dark:border-gray-600 flex flex-col sm:flex-row justify-between items-center">
            <!-- Quantity Selector -->
            <div class="flex items-center mb-4 sm:mb-0">
                <label for="quantity" class="mr-2 font-semibold" data-key="quantity">Quantity:</label>
                <input type="number" id="quantity" value="1" min="1" max="99" class="w-20 border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 rounded-md shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50 p-2">
            </div>
            <!-- Add to Cart Button -->
            <button id="add-to-cart-btn" class="w-full sm:w-auto bg-indigo-600 text-white px-6 py-3 rounded-md hover:bg-indigo-700 dark:bg-indigo-500 dark:hover:bg-indigo-600 transition-all duration-300 font-semibold flex items-center justify-center shadow-sm hover:shadow-md">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z" />
                </svg>
                <span data-key="add_to_cart">Add to Cart</span>
            </button>
        </div>
    </div>

    <!-- Login Modal Panel -->
    <div id="login-modal" class="modal bg-white dark:bg-gray-800 w-11/12 md:max-w-md mx-auto rounded-lg shadow-lg overflow-hidden">
        <div class="flex justify-between items-center p-4 border-b dark:border-gray-700">
            <h2 class="text-xl font-semibold" data-key="login">Login</h2>
            <button class="modal-close-btn text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 transition-colors">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                </svg>
            </button>
        </div>
        <form class="p-6 space-y-4">
            <div>
                <label for="login-email" class="block text-sm font-medium text-gray-700 dark:text-gray-300" data-key="email_label">Email Address</label>
                <input type="email" id="login-email" class="mt-1 block w-full p-2 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500" required>
            </div>
            <div>
                <label for="login-password" class="block text-sm font-medium text-gray-700 dark:text-gray-300" data-key="password_label">Password</label>
                <input type="password" id="login-password" class="mt-1 block w-full p-2 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500" required>
            </div>
            <button type="submit" class="w-full bg-indigo-600 text-white px-6 py-3 rounded-md hover:bg-indigo-700 dark:bg-indigo-500 dark:hover:bg-indigo-600 transition-all duration-300 font-semibold" data-key="login_cta">
                Login
            </button>
        </form>
    </div>

    <!-- Signup Modal Panel -->
    <div id="signup-modal" class="modal bg-white dark:bg-gray-800 w-11/12 md:max-w-md mx-auto rounded-lg shadow-lg overflow-hidden">
        <div class="flex justify-between items-center p-4 border-b dark:border-gray-700">
            <h2 class="text-xl font-semibold" data-key="signup">Sign Up</h2>
            <button class="modal-close-btn text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 transition-colors">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                </svg>
            </button>
        </div>
        <form class="p-6 space-y-4">
            <div>
                <label for="signup-email" class="block text-sm font-medium text-gray-700 dark:text-gray-300" data-key="email_label">Email Address</label>
                <input type="email" id="signup-email" class="mt-1 block w-full p-2 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500" required>
            </div>
            <div>
                <label for="signup-password" class="block text-sm font-medium text-gray-700 dark:text-gray-300" data-key="password_label">Password</label>
                <input type="password" id="signup-password" class="mt-1 block w-full p-2 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500" required>
            </div>
            <div>
                <label for="signup-confirm-password" class="block text-sm font-medium text-gray-700 dark:text-gray-300" data-key="confirm_password_label">Confirm Password</label>
                <input type="password" id="signup-confirm-password" class="mt-1 block w-full p-2 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500" required>
            </div>
            <button type="submit" class="w-full bg-indigo-600 text-white px-6 py-3 rounded-md hover:bg-indigo-700 dark:bg-indigo-500 dark:hover:bg-indigo-600 transition-all duration-300 font-semibold" data-key="signup_cta">
                Create Account
            </button>
        </form>
    </div>


    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // --- Sample Product Data ---
            const products = [
                {
                    id: 1,
                    name: 'Wireless Headphones',
                    category: 'Electronics',
                    img: 'https://placehold.co/600x400/6366f1/white?text=Item+1',
                    desc: 'High-fidelity wireless headphones with active noise cancelling and 20-hour battery life. Perfect for music lovers and commuters.',
                    bestPrice: 149.99,
                    shops: [
                        { name: 'TechStore', price: 149.99, quantity: 50 },
                        { name: 'ElectroWorld', price: 152.49, quantity: 23 },
                        { name: 'BestDeals', price: 149.99, quantity: 12 },
                    ]
                },
                {
                    id: 2,
                    name: 'Smart Coffee Maker',
                    category: 'Home',
                    img: 'https://placehold.co/600x400/10b981/white?text=Item+2',
                    desc: 'Wi-Fi enabled smart coffee maker. Schedule your brew from your phone and wake up to fresh coffee every morning.',
                    bestPrice: 89.50,
                    shops: [
                        { name: 'HomeGoods Inc.', price: 89.50, quantity: 100 },
                        { name: 'ApplianceHub', price: 92.00, quantity: 45 },
                    ]
                },
                {
                    id: 3,
                    name: 'Running Shoes',
                    category: 'Apparel',
                    img: 'https://placehold.co/600x400/f59e0b/white?text=Item+3',
                    desc: 'Lightweight and breathable running shoes with high-performance cushioning for maximum comfort on your runs.',
                    bestPrice: 119.99,
                    shops: [
                        { name: 'SportyWorld', price: 120.00, quantity: 75 },
                        { name: 'FitGear', price: 125.00, quantity: 50 },
                        { name: 'The Running Store', price: 119.99, quantity: 15 },
                    ]
                },
                {
                    id: 4,
                    name: 'Hardcover Novel',
                    category: 'Books',
                    img: 'https://placehold.co/600x400/ec4899/white?text=Item+4',
                    desc: 'A captivating new bestseller from an award-winning author. A must-read for all fiction lovers. 450 pages.',
                    bestPrice: 19.99,
                    shops: [
                        { name: 'The Book Nook', price: 19.99, quantity: 200 },
                        { name: 'ReadersParadise', price: 22.50, quantity: 150 },
                    ]
                },
                {
                    id: 5,
                    name: 'Portable SSD 1TB',
                    category: 'Electronics',
                    img: 'https://placehold.co/600x400/0ea5e9/white?text=Item+5',
                    desc: 'Blazing fast 1TB portable SSD with USB-C. Perfect for photographers, videographers, and gamers.',
                    bestPrice: 130.00,
                    shops: [
                        { name: 'TechStore', price: 135.99, quantity: 30 },
                        { name: 'DataWorld', price: 130.00, quantity: 40 },
                    ]
                },
                {
                    id: 6,
                    name: 'Denim Jacket',
                    category: 'Apparel',
                    img: 'https://placehold.co/600x400/ef4444/white?text=Item+6',
                    desc: 'Classic denim jacket with a modern fit. Made from 100% durable cotton.',
                    bestPrice: 75.00,
                    shops: [
                        { name: 'Style Co.', price: 75.00, quantity: 60 },
                        { name: 'ApparelZone', price: 79.99, quantity: 30 },
                    ]
                }
            ];

            // --- Translations ---
            const translations = {
                en: {
                    page_title: "PriceFinder - Find Best Prices",
                    cart: "Cart",
                    login: "Login",
                    signup: "Sign Up",
                    find_item_label: "Find an item",
                    search_placeholder: "e.g., Wireless Headphones",
                    category_label: "Category",
                    cat_all: "All",
                    cat_electronics: "Electronics",
                    cat_books: "Books",
                    cat_apparel: "Apparel",
                    cat_home: "Home",
                    sort_by_label: "Sort By",
                    sort_best_match: "Best Match",
                    sort_low_high: "Price: Low to High",
                    sort_high_low: "Price: High to Low",
                    price_range_label: "Price Range",
                    clear_filters: "Clear Filters",
                    results: "Results",
                    no_results_title: "No results found",
                    no_results_desc: "Try adjusting your search or filters.",
                    product_details: "Product Details",
                    available_from: "Available from:",
                    quantity: "Quantity:",
                    add_to_cart: "Add to Cart",
                    email_label: "Email Address",
                    password_label: "Password",
                    confirm_password_label: "Confirm Password",
                    login_cta: "Login",
                    signup_cta: "Create Account",
                    footer_desc: "Find the best deals on your favorite products from thousands of stores.",
                    footer_links: "Quick Links",
                    footer_about: "About Us",
                    footer_contact: "Contact",
                    footer_faq: "FAQ",
                    footer_legal: "Legal",
                    footer_privacy: "Privacy Policy",
                    footer_terms: "Terms of Service",
                    footer_social: "Follow Us",
                    footer_copyright: "© 2025 PriceFinder. All rights reserved.",
                    toast_wishlist_add: "added to wishlist!",
                    toast_wishlist_remove: "removed from wishlist.",
                    toast_cart_add: "added to cart!",
                },
                hi: {
                    page_title: "प्राइसफाइंडर - सर्वोत्तम मूल्य खोजें",
                    cart: "कार्ट",
                    login: "लॉग इन करें",
                    signup: "साइन अप करें",
                    find_item_label: "एक आइटम खोजें",
                    search_placeholder: "जैसे, वायरलेस हेडफ़ोन",
                    category_label: "श्रेणी",
                    cat_all: "सभी",
                    cat_electronics: "इलेक्ट्रॉनिक्स",
                    cat_books: "किताबें",
                    cat_apparel: "परिधान",
                    cat_home: "घर",
                    sort_by_label: "क्रमबद्ध करें",
                    sort_best_match: "सर्वोत्तम मिलान",
                    sort_low_high: "मूल्य: कम से अधिक",
                    sort_high_low: "मूल्य: अधिक से कम",
                    price_range_label: "मूल्य सीमा",
                    clear_filters: "फ़िल्टर साफ़ करें",
                    results: "परिणाम",
                    no_results_title: "कोई परिणाम नहीं मिला",
                    no_results_desc: "अपनी खोज या फ़िल्टर समायोजित करने का प्रयास करें।",
                    product_details: "उत्पाद विवरण",
                    available_from: "यहाँ उपलब्ध है:",
                    quantity: "मात्रा:",
                    add_to_cart: "कार्ट में जोड़ें",
                    email_label: "ईमेल पता",
                    password_label: "पासवर्ड",
                    confirm_password_label: "पासवर्ड की पुष्टि करें",
                    login_cta: "लॉग इन करें",
                    signup_cta: "अकाउंट बनाएं",
                    footer_desc: "हजारों स्टोर्स से अपने पसंदीदा उत्पादों पर सर्वोत्तम सौदे खोजें।",
                    footer_links: "त्वरित लिंक्स",
                    footer_about: "हमारे बारे में",
                    footer_contact: "संपर्क करें",
                    footer_faq: "सामान्य प्रश्न",
                    footer_legal: "कानूनी",
                    footer_privacy: "गोपनीयता नीति",
                    footer_terms: "सेवा की शर्तें",
                    footer_social: "हमें फ़ॉलो करें",
                    footer_copyright: "© 2025 प्राइसफाइंडर। सर्वाधिकार सुरक्षित।",
                    toast_wishlist_add: "इच्छा-सूची में जोड़ा गया!",
                    toast_wishlist_remove: "इच्छा-सूची से हटा दिया गया।",
                    toast_cart_add: "कार्ट में जोड़ा गया!",
                },
                or: {
                    page_title: "ପ୍ରାଇସଫାଇଣ୍ଡର୍ - ସର୍ବୋତ୍ତମ ମୂଲ୍ୟ ଖୋଜନ୍ତୁ",
                    cart: "କାର୍ଟ",
                    login: "ଲଗ୍ ଇନ୍",
                    signup: "ସାଇନ୍ ଅପ୍",
                    find_item_label: "ଏକ ଆଇଟମ୍ ଖୋଜନ୍ତୁ",
                    search_placeholder: "ଯେପରି, ୱାୟାରଲେସ୍ ହେଡଫୋନ୍",
                    category_label: "ଶ୍ରେଣୀ",
                    cat_all: "ସବୁ",
                    cat_electronics: "ଇଲେକ୍ଟ୍ରୋନିକ୍ସ",
                    cat_books: "ବହି",
                    cat_apparel: "ପୋଷାକ",
                    cat_home: "ଘର",
                    sort_by_label: "କ୍ରମ କରନ୍ତୁ",
                    sort_best_match: "ସର୍ବୋତ୍ତମ ମେଳ",
                    sort_low_high: "ମୂଲ୍ୟ: କମ୍ ରୁ ଅଧିକ",
                    sort_high_low: "ମୂଲ୍ୟ: ଅଧିକ ରୁ କମ୍",
                    price_range_label: "ମୂଲ୍ୟ ସୀମା",
                    clear_filters: "ଫିଲ୍ଟର୍ ସଫା କରନ୍ତୁ",
                    results: "ଫଳାଫଳ",
                    no_results_title: "କୌଣସି ଫଳାଫଳ ମିଳିଲା ନାହିଁ",
                    no_results_desc: "ଆପଣଙ୍କ ସର୍ଚ୍ଚ କିମ୍ବା ଫିଲ୍ଟର୍ ଆଡଜଷ୍ଟ୍ କରିବାକୁ ଚେଷ୍ଟା କରନ୍ତୁ |",
                    product_details: "ଉତ୍ପାଦ ବିବରଣୀ",
                    available_from: "ଏଠାରୁ ଉପଲବ୍ଧ:",
                    quantity: "ପରିମାଣ:",
                    add_to_cart: "କାର୍ଟରେ ଯୋଡନ୍ତୁ",
                    email_label: "ଇମେଲ୍ ଠିକଣା",
                    password_label: "ପାସୱାର୍ଡ",
                    confirm_password_label: "ପାସୱାର୍ଡ ନିଶ୍ଚିତ କରନ୍ତୁ",
                    login_cta: "ଲଗ୍ ଇନ୍ କରନ୍ତୁ",
                    signup_cta: "ଆକାଉଣ୍ଟ୍ ସୃଷ୍ଟି କରନ୍ତୁ",
                    footer_desc: "ହଜାର ହଜାର ଷ୍ଟୋରରୁ ଆପଣଙ୍କର ପ୍ରିୟ ଉତ୍ପାଦଗୁଡିକରେ ସର୍ବୋତ୍ତମ ଡିଲ୍ ଖୋଜନ୍ତୁ |",
                    footer_links: "ଶୀଘ୍ର ଲିଙ୍କ୍",
                    footer_about: "ଆମ ବିଷୟରେ",
                    footer_contact: "ଯୋଗାଯୋଗ",
                    footer_faq: "FAQ",
                    footer_legal: "ଆଇନଗତ",
                    footer_privacy: "ଗୋପନୀୟତା ନୀତି",
                    footer_terms: "ସେବା ସର୍ତ୍ତାବଳୀ",
                    footer_social: "ଆମକୁ ଅନୁସରଣ କରନ୍ତୁ",
                    footer_copyright: "© 2025 ପ୍ରାଇସଫାଇଣ୍ଡର୍ | ସମସ୍ତ ଅଧିକାର ସଂରକ୍ଷିତ |",
                    toast_wishlist_add: "ଇଚ୍ଛା ତାଲିକାରେ ଯୋଡିହେଲା!",
                    toast_wishlist_remove: "ଇଚ୍ଛା ତାଲିକାରୁ ହଟାଗଲା।",
                    toast_cart_add: "କାର୍ଟରେ ଯୋଡିହେଲା!",
                }
            };

            let currentLang = 'en';

            // --- DOM Elements ---
            const productListContainer = document.getElementById('product-list');
            const noResultsDiv = document.getElementById('no-results');
            const searchInput = document.getElementById('search');
            const categorySelect = document.getElementById('category');
            const sortSelect = document.getElementById('sort_by');
            const priceSlider = document.getElementById('price_range');
            const priceValue = document.getElementById('price_value');
            const clearFiltersBtn = document.getElementById('clear-filters');
            const cartCountEl = document.getElementById('cart-count');
            
            // Modal elements
            const modalBackdrop = document.getElementById('modal-backdrop');
            const itemModal = document.getElementById('item-modal');
            const loginModal = document.getElementById('login-modal');
            const signupModal = document.getElementById('signup-modal');
            const allModals = document.querySelectorAll('.modal');
            const closeModalBtns = document.querySelectorAll('.modal-close-btn');
            
            // Header buttons
            const loginBtn = document.getElementById('login-btn');
            const signupBtn = document.getElementById('signup-btn');
            const langMenuBtn = document.getElementById('lang-menu-btn');
            const langMenu = document.getElementById('lang-menu');
            const langButtons = document.querySelectorAll('.lang-btn');
            const themeToggle = document.getElementById('theme-toggle');

            // Item Modal content
            const addToCartBtn = document.getElementById('add-to-cart-btn');
            const modalImg = document.getElementById('modal-img');
            const modalName = document.getElementById('modal-name');
            const modalDesc = document.getElementById('modal-desc');
            const modalShopList = document.getElementById('modal-shop-list');

            // --- Language Function ---
            function updateLanguage(lang) {
                if (!translations[lang]) return;
                currentLang = lang;
                document.documentElement.lang = lang;

                document.querySelectorAll('[data-key]').forEach(el => {
                    const key = el.dataset.key;
                    if (translations[lang][key]) {
                        el.textContent = translations[lang][key];
                    }
                });
                
                document.querySelectorAll('[data-placeholder-key]').forEach(el => {
                    const key = el.dataset.placeholderKey;
                    if (translations[lang][key]) {
                        el.placeholder = translations[lang][key];
                    }
                });
                
                document.title = translations[lang].page_title;
                langMenu.classList.add('hidden');
            }

            // --- Theme Function ---
            function toggleTheme() {
                const isDark = document.documentElement.classList.toggle('dark');
                localStorage.theme = isDark ? 'dark' : 'light';
            }

            // --- Toast Notification ---
            function showToast(message, type = 'success') {
                const toast = document.createElement('div');
                toast.textContent = message;
                const bgColor = type === 'success' ? 'bg-green-500' : 'bg-red-500';
                toast.className = `fixed bottom-5 right-5 ${bgColor} text-white px-4 py-2 rounded-md shadow-lg transition-all duration-300 z-50 transform translate-x-full`;
                document.body.appendChild(toast);
                
                setTimeout(() => {
                    toast.style.transform = 'translateX(0)';
                }, 100);

                setTimeout(() => {
                    toast.style.transform = 'translateX(120%)';
                }, 2500);
                
                setTimeout(() => {
                    if (document.body.contains(toast)) {
                        document.body.removeChild(toast);
                    }
                }, 2800);
            }

            // --- Modal Functions ---
            function openModal(modalId) {
                closeAllModals(); // Close any open modals first
                const modal = document.getElementById(modalId);
                if (modal) {
                    modalBackdrop.classList.add('show');
                    modal.classList.add('show');
                }
            }

            function closeAllModals() {
                allModals.forEach(modal => modal.classList.remove('show'));
                modalBackdrop.classList.remove('show');
            }
            
            function openItemModal(productId) {
                const product = products.find(p => p.id == productId);
                if (!product) return;

                itemModal.dataset.productName = product.name;
                modalImg.src = product.img;
                modalImg.onerror = () => { modalImg.src = 'https://placehold.co/600x400/ef4444/white?text=Image+Error'; };
                modalName.textContent = product.name;
                modalDesc.textContent = product.desc;
                
                modalShopList.innerHTML = '';
                product.shops.sort((a, b) => a.price - b.price).forEach(shop => {
                    const quantityKey = shop.quantity < 20 ? 'low_stock' : 'in_stock';
                    const quantityText = shop.quantity < 20
                        ? `<span class="text-red-600 dark:text-red-400">Quantity: ${shop.quantity} (Low Stock)</span>`
                        : `<span class="text-gray-600 dark:text-gray-300">Quantity: ${shop.quantity}${shop.quantity > 99 ? '+' : ''}</span>`;

                    const bestPriceBadge = shop.price <= product.bestPrice
                        ? `<span class="ml-2 bg-yellow-200 text-yellow-800 text-xs font-semibold px-2 py-0.5 rounded-full">Best Price</span>`
                        : '';
                    
                    const shopHtml = `
                        <div class="flex justify-between items-center bg-gray-50 dark:bg-gray-700 p-3 rounded-md border border-gray-200 dark:border-gray-600">
                            <div>
                                <p class="font-semibold text-gray-800 dark:text-gray-100">${shop.name}</p>
                                <p class="text-sm">${quantityText}</p>
                            </div>
                            <div class="text-right">
                                <p class="text-lg font-bold text-indigo-600 dark:text-indigo-400">$${shop.price.toFixed(2)}</p>
                                ${bestPriceBadge}
                            </div>
                        </div>
                    `;
                    modalShopList.innerHTML += shopHtml;
                });

                openModal('item-modal');
            }

            // --- Product Rendering & Filtering ---
            function renderProducts(productsToRender) {
                productListContainer.innerHTML = ''; 

                if (productsToRender.length === 0) {
                    noResultsDiv.classList.remove('hidden');
                } else {
                    noResultsDiv.classList.add('hidden');
                }

                productsToRender.forEach(product => {
                    const card = document.createElement('div');
                    card.className = 'bg-white dark:bg-gray-800 rounded-lg shadow-md dark:shadow-gray-700 overflow-hidden transition-all duration-300 hover:shadow-xl hover:-translate-y-1 relative';
                    
                    const categoryText = translations[currentLang][`cat_${product.category.toLowerCase()}`] || product.category;
                    const categoryColor = {
                        'Electronics': 'bg-indigo-100 text-indigo-800 dark:bg-indigo-900 dark:text-indigo-200',
                        'Home': 'bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200',
                        'Apparel': 'bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200',
                        'Books': 'bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200',
                    };
                    const badgeClass = categoryColor[product.category] || 'bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-200';

                    card.innerHTML = `
                        <span class="absolute top-2 left-2 ${badgeClass} text-xs font-semibold px-2.5 py-0.5 rounded-full z-10">${categoryText}</span>
                        <button class="wishlist-btn absolute top-2 right-2 p-1.5 bg-white/70 dark:bg-gray-800/70 rounded-full backdrop-blur-sm z-10" data-product-id="${product.id}">
                            <svg class="heart-icon h-5 w-5" viewBox="0 0 24 24">
                                <path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/>
                            </svg>
                        </button>
                        <img src="${product.img}" 
                             alt="${product.name}" 
                             class="w-full h-48 object-cover"
                             onerror="this.src='https://placehold.co/600x400/ef4444/white?text=Image+Error'">
                        <div class="p-4">
                            <h3 class="text-lg font-semibold text-gray-900 dark:text-white truncate">${product.name}</h3>
                            <p class="text-sm text-gray-600 dark:text-gray-400 mt-1">from ${product.shops[0].name}</p>
                            <p class="text-xl font-bold text-indigo-600 dark:text-indigo-400 mt-2">$${product.bestPrice.toFixed(2)}</p>
                            <button class="view-details-btn mt-4 w-full bg-indigo-100 dark:bg-indigo-900 text-indigo-700 dark:text-indigo-200 px-4 py-2 rounded-md hover:bg-indigo-200 dark:hover:bg-indigo-800 transition-colors duration-300"
                                    data-product-id="${product.id}">
                                View Details
                            </button>
                        </div>
                    `;
                    card.querySelector('.view-details-btn').addEventListener('click', (e) => {
                        openItemModal(e.currentTarget.getAttribute('data-product-id'));
                    });

                    card.querySelector('.wishlist-btn').addEventListener('click', (e) => {
                        e.stopPropagation();
                        const btn = e.currentTarget;
                        btn.classList.toggle('active');
                        if (btn.classList.contains('active')) {
                            showToast(`${product.name} ${translations[currentLang].toast_wishlist_add}`);
                        } else {
                            showToast(`${product.name} ${translations[currentLang].toast_wishlist_remove}`, 'error');
                        }
                    });

                    productListContainer.appendChild(card);
                });
            }

            function filterAndRender() {
                const searchTerm = searchInput.value.toLowerCase();
                const category = categorySelect.value;
                const maxPrice = parseFloat(priceSlider.value);
                const sortBy = sortSelect.value;

                let filteredProducts = products.filter(product => {
                    const nameMatch = product.name.toLowerCase().includes(searchTerm);
                    const categoryMatch = (category === 'All' || product.category === category);
                    const priceMatch = product.bestPrice <= maxPrice;
                    return nameMatch && categoryMatch && priceMatch;
                });

                if (sortBy === 'Price: Low to High') {
                    filteredProducts.sort((a, b) => a.bestPrice - b.bestPrice);
                } else if (sortBy === 'Price: High to Low') {
                    filteredProducts.sort((a, b) => b.bestPrice - a.bestPrice);
                }

                renderProducts(filteredProducts);
            }

            function clearAllFilters() {
                searchInput.value = '';
                categorySelect.value = 'All';
                sortSelect.value = 'Best Match';
                priceSlider.value = 1000;
                priceValue.textContent = '$1000';
                filterAndRender();
            }

            // --- Initial Render ---
            updateLanguage(currentLang); // Set initial language
            filterAndRender(); // Initial product render

            // --- Event Listeners ---
            
            // Modals
            loginBtn.addEventListener('click', () => openModal('login-modal'));
            signupBtn.addEventListener('click', () => openModal('signup-modal'));
            closeModalBtns.forEach(btn => btn.addEventListener('click', closeAllModals));
            modalBackdrop.addEventListener('click', closeAllModals);
            
            // Add to Cart
            addToCartBtn.addEventListener('click', () => {
                const quantityInput = document.getElementById('quantity');
                const quantity = parseInt(quantityInput.value, 10);
                const itemName = itemModal.dataset.productName || 'Item';
                
                if (quantity > 0) {
                    showToast(`${quantity} of ${itemName} ${translations[currentLang].toast_cart_add}`);
                    let currentCount = parseInt(cartCountEl.textContent, 10);
                    cartCountEl.textContent = currentCount + quantity;
                    closeAllModals();
                    quantityInput.value = 1; // Reset quantity
                } else {
                    showToast('Please enter a valid quantity.', 'error');
                }
            });

            // Filters
            searchInput.addEventListener('input', filterAndRender);
            categorySelect.addEventListener('change', filterAndRender);
            sortSelect.addEventListener('change', filterAndRender);
            priceSlider.addEventListener('input', (e) => {
                priceValue.textContent = `$${e.target.value}`;
            });
            priceSlider.addEventListener('change', filterAndRender); 
            clearFiltersBtn.addEventListener('click', clearAllFilters);

            // Header Controls
            themeToggle.addEventListener('click', toggleTheme);
            langMenuBtn.addEventListener('click', (e) => {
                e.stopPropagation();
                langMenu.classList.toggle('hidden');
            });
            langButtons.forEach(btn => {
                btn.addEventListener('click', (e) => {
                    updateLanguage(e.target.dataset.lang);
                });
            });
            // Close lang menu if clicking outside
            document.addEventListener('click', (e) => {
                if (!langMenu.classList.contains('hidden') && !langMenuBtn.contains(e.target)) {
                    langMenu.classList.add('hidden');
                }
            });
        });
    </script>

</body>
</html>

